<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://npmcdn.com/bootstrap@4.0.0-alpha.3/dist/css/bootstrap.min.css" crossorigin="anonymous">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser-polyfill.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/react@15/dist/react-with-addons.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/react-dom@15/dist/react-dom.js"></script>
  <script src="https://npmcdn.com/reactstrap@2/dist/reactstrap.min.js"></script>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Workout Log</title>
</head>

<body>
  <div id="app"></div>
</body>

<script type="text/babel">
const { Col, Button, Form, FormGroup, Label, Input, FormText } = Reactstrap;

class Example extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      exercises: []
    };
  }

  componentWillMount() {
    fetch(`http://localhost:5001/exercises`)
      .then((response) => response.json())
      .then((responseJSON) => {
        // do stuff with responseJSON here...
        const exercises = responseJSON;
        this.setState({ exercises });
      });
  }
  
  render() {
    const exerciseOptions = this.state.exercises.map((ex) => {
      return <option value={ex.id}>{ex.name}</option>
    });
    return (
      <Form method="POST" action="http://localhost:5001/add_workout">
        <FormGroup>
          <Label for="exercise1">Select</Label>
          <Input type="select" name="exercise1" id="exercise1">
            {exerciseOptions}
          </Input>
        </FormGroup>

        <FormGroup>
          <Label for="weight1">Weight</Label>
          <Input type="text" name="weight1" id="weight1" placeholder="__ lbs" />
        </FormGroup>

        <FormGroup>
          <Label for="reps1">Reps</Label>
          <Input type="text" name="reps" id="reps1" placeholder="__ reps" />
        </FormGroup>

        <input type="hidden" name="exercise_count" value="1" />

        <Button>Submit</Button>
      </Form>
    );
  }
};

ReactDOM.render(
  <Col xs="6">
    <Example name="Joe Schmoe"/>
  </Col>,
  document.getElementById('app')
);

</script>
</html>